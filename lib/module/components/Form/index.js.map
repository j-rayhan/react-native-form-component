{"version":3,"names":["React","KeyboardAvoidingView","Platform","Pressable","Text","StyleSheet","containsError","colors","submitForm","Form","props","width","setWidth","useState","opacity","setOpacity","handleButtonPress","fieldsWithError","Children","forEach","children","child","index","ref","current","getComponent","keyboardType","isRequired","value","customValidation","validation","status","push","label","placeholder","setState","length","console","error","JSON","stringify","onButtonPress","OS","keyboardVerticalOffset","undefined","style","hideSubmitButton","styles","button","buttonStyle","color","radius","event","nativeEvent","layout","buttonText","buttonTextStyle","defaultProps","create","height","justifyContent","alignItems","backgroundColor","red","borderRadius","marginVertical","fontSize","fontWeight"],"sources":["index.tsx"],"sourcesContent":["import * as React from 'react';\n// import React, { Children, useState, ReactNode } from 'react';\nimport {\n  KeyboardAvoidingView,\n  Platform,\n  Pressable,\n  Text,\n  StyleSheet,\n  TextInputSubmitEditingEventData,\n  NativeSyntheticEvent,\n  ViewStyle,\n} from 'react-native';\n\nimport { containsError } from '../FormItem';\nimport { colors } from '../../colors';\n\ninterface Props {\n  children: React.ReactNode;\n  keyboardVerticalOffset?: number;\n  buttonText?: string;\n  buttonStyle?: object | object[];\n  buttonTextStyle?: object | object[];\n  onButtonPress?: () => void;\n  style?: ViewStyle;\n  hideSubmitButton?: boolean;\n}\n\nexport let submitForm: (\n  e?: NativeSyntheticEvent<TextInputSubmitEditingEventData>\n) => void;\n\nexport default function Form(props: Props) {\n  const [width, setWidth] = React.useState(0);\n  const [opacity, setOpacity] = React.useState(1);\n\n  const handleButtonPress = () => {\n    const fieldsWithError: string[] = [];\n    React.Children.forEach(props.children, (child, index) => {\n      //@ts-ignore\n      if (child && child.ref?.current?.getComponent() == 'FormItem') {\n        const { keyboardType, isRequired, value, customValidation } =\n          //@ts-ignore\n          child.props;\n        let validation;\n\n        if (customValidation) validation = customValidation();\n        if (containsError(keyboardType, isRequired, value, validation).status) {\n          fieldsWithError.push(\n            //@ts-ignore\n            child.props.label || child.props.placeholder || 'FormItem' + index\n          );\n          //@ts-ignore\n          child.ref?.current.setState();\n        }\n      }\n    });\n\n    if (fieldsWithError.length) {\n      console.error(\n        'The following fields do not fulfil their conditions:\\n' +\n          JSON.stringify(fieldsWithError, null, 2)\n      );\n      return;\n    }\n\n    props.onButtonPress?.();\n  };\n\n  submitForm = () => handleButtonPress();\n\n  return (\n    <KeyboardAvoidingView\n      keyboardVerticalOffset={\n        Platform.OS == 'ios' ? props.keyboardVerticalOffset || 50 : undefined\n      }\n      behavior={Platform.OS == 'ios' ? 'padding' : undefined}\n      style={props.style}\n    >\n      {props.children}\n      {!props.hideSubmitButton && (\n        <Pressable\n          style={[\n            styles.button,\n            Platform.OS == 'ios' ? { opacity } : undefined,\n            props.buttonStyle,\n          ]}\n          onPress={handleButtonPress}\n          android_ripple={{ color: 'lightgrey', radius: width }}\n          onLayout={(event) => setWidth(event.nativeEvent.layout.width)}\n          onPressIn={() => setOpacity(0.5)}\n          onPressOut={() => setOpacity(1)}\n        >\n          <Text style={[styles.buttonText, props.buttonTextStyle]}>\n            {props.buttonText || 'Submit'}\n          </Text>\n        </Pressable>\n      )}\n    </KeyboardAvoidingView>\n  );\n}\n\nForm.defaultProps = {\n  style: {},\n};\n\nconst styles = StyleSheet.create({\n  button: {\n    height: 48,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.red,\n    borderRadius: 8,\n    marginVertical: 32,\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n"],"mappings":"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"}