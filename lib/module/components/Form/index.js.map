{"version":3,"names":["React","Children","useState","KeyboardAvoidingView","Platform","Pressable","Text","StyleSheet","containsError","colors","submitForm","Form","props","width","setWidth","opacity","setOpacity","handleButtonPress","fieldsWithError","forEach","children","child","index","ref","current","getComponent","keyboardType","isRequired","value","customValidation","validation","status","push","label","placeholder","setState","length","console","error","JSON","stringify","onButtonPress","OS","keyboardVerticalOffset","undefined","style","hideSubmitButton","styles","button","buttonStyle","color","radius","event","nativeEvent","layout","buttonText","buttonTextStyle","defaultProps","create","height","justifyContent","alignItems","backgroundColor","red","borderRadius","marginVertical","fontSize","fontWeight"],"sources":["index.tsx"],"sourcesContent":["import React, { Children, useState, ReactNode } from 'react';\nimport {\n  KeyboardAvoidingView,\n  Platform,\n  Pressable,\n  Text,\n  StyleSheet,\n  TextInputSubmitEditingEventData,\n  NativeSyntheticEvent,\n  ViewStyle,\n} from 'react-native';\n\nimport { containsError } from '../FormItem';\nimport { colors } from '../../colors';\n\ninterface Props {\n  children: ReactNode;\n  keyboardVerticalOffset?: number;\n  buttonText?: string;\n  buttonStyle?: object | object[];\n  buttonTextStyle?: object | object[];\n  onButtonPress?: () => void;\n  style?: ViewStyle;\n  hideSubmitButton?: boolean;\n}\n\nexport let submitForm: (\n  e?: NativeSyntheticEvent<TextInputSubmitEditingEventData>\n) => void;\n\nexport default function Form(props: Props) {\n  const [width, setWidth] = useState(0);\n  const [opacity, setOpacity] = useState(1);\n\n  const handleButtonPress = () => {\n    const fieldsWithError: string[] = [];\n    Children.forEach(props.children, (child, index) => {\n      //@ts-ignore\n      if (child && child.ref?.current?.getComponent() == 'FormItem') {\n        const { keyboardType, isRequired, value, customValidation } =\n          //@ts-ignore\n          child.props;\n        let validation;\n\n        if (customValidation) validation = customValidation();\n        if (containsError(keyboardType, isRequired, value, validation).status) {\n          fieldsWithError.push(\n            //@ts-ignore\n            child.props.label || child.props.placeholder || 'FormItem' + index\n          );\n          //@ts-ignore\n          child.ref?.current.setState();\n        }\n      }\n    });\n\n    if (fieldsWithError.length) {\n      console.error(\n        'The following fields do not fulfil their conditions:\\n' +\n          JSON.stringify(fieldsWithError, null, 2)\n      );\n      return;\n    }\n\n    props.onButtonPress?.();\n  };\n\n  submitForm = () => handleButtonPress();\n\n  return (\n    <KeyboardAvoidingView\n      keyboardVerticalOffset={\n        Platform.OS == 'ios' ? props.keyboardVerticalOffset || 50 : undefined\n      }\n      behavior={Platform.OS == 'ios' ? 'padding' : undefined}\n      style={props.style}\n    >\n      {props.children}\n      {!props.hideSubmitButton && (\n        <Pressable\n          style={[\n            styles.button,\n            Platform.OS == 'ios' ? { opacity } : undefined,\n            props.buttonStyle,\n          ]}\n          onPress={handleButtonPress}\n          android_ripple={{ color: 'lightgrey', radius: width }}\n          onLayout={(event) => setWidth(event.nativeEvent.layout.width)}\n          onPressIn={() => setOpacity(0.5)}\n          onPressOut={() => setOpacity(1)}\n        >\n          <Text style={[styles.buttonText, props.buttonTextStyle]}>\n            {props.buttonText || 'Submit'}\n          </Text>\n        </Pressable>\n      )}\n    </KeyboardAvoidingView>\n  );\n}\n\nForm.defaultProps = {\n  style: {},\n};\n\nconst styles = StyleSheet.create({\n  button: {\n    height: 48,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.red,\n    borderRadius: 8,\n    marginVertical: 32,\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n"],"mappings":"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"}