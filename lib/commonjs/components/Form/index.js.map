{"version":3,"names":["submitForm","Form","props","width","setWidth","React","useState","opacity","setOpacity","handleButtonPress","fieldsWithError","Children","forEach","children","child","index","ref","current","getComponent","keyboardType","isRequired","value","customValidation","validation","containsError","status","push","label","placeholder","setState","length","console","error","JSON","stringify","onButtonPress","Platform","OS","keyboardVerticalOffset","undefined","style","hideSubmitButton","styles","button","buttonStyle","color","radius","event","nativeEvent","layout","buttonText","buttonTextStyle","defaultProps","StyleSheet","create","height","justifyContent","alignItems","backgroundColor","colors","red","borderRadius","marginVertical","fontSize","fontWeight"],"sources":["index.tsx"],"sourcesContent":["import * as React from 'react';\n// import React, { Children, useState, ReactNode } from 'react';\nimport {\n  KeyboardAvoidingView,\n  Platform,\n  Pressable,\n  Text,\n  StyleSheet,\n  TextInputSubmitEditingEventData,\n  NativeSyntheticEvent,\n  ViewStyle,\n} from 'react-native';\n\nimport { containsError } from '../FormItem';\nimport { colors } from '../../colors';\n\ninterface Props {\n  children: React.ReactNode;\n  keyboardVerticalOffset?: number;\n  buttonText?: string;\n  buttonStyle?: object | object[];\n  buttonTextStyle?: object | object[];\n  onButtonPress?: () => void;\n  style?: ViewStyle;\n  hideSubmitButton?: boolean;\n}\n\nexport let submitForm: (\n  e?: NativeSyntheticEvent<TextInputSubmitEditingEventData>\n) => void;\n\nexport default function Form(props: Props) {\n  const [width, setWidth] = React.useState(0);\n  const [opacity, setOpacity] = React.useState(1);\n\n  const handleButtonPress = () => {\n    const fieldsWithError: string[] = [];\n    React.Children.forEach(props.children, (child, index) => {\n      //@ts-ignore\n      if (child && child.ref?.current?.getComponent() == 'FormItem') {\n        const { keyboardType, isRequired, value, customValidation } =\n          //@ts-ignore\n          child.props;\n        let validation;\n\n        if (customValidation) validation = customValidation();\n        if (containsError(keyboardType, isRequired, value, validation).status) {\n          fieldsWithError.push(\n            //@ts-ignore\n            child.props.label || child.props.placeholder || 'FormItem' + index\n          );\n          //@ts-ignore\n          child.ref?.current.setState();\n        }\n      }\n    });\n\n    if (fieldsWithError.length) {\n      console.error(\n        'The following fields do not fulfil their conditions:\\n' +\n          JSON.stringify(fieldsWithError, null, 2)\n      );\n      return;\n    }\n\n    props.onButtonPress?.();\n  };\n\n  submitForm = () => handleButtonPress();\n\n  return (\n    <KeyboardAvoidingView\n      keyboardVerticalOffset={\n        Platform.OS == 'ios' ? props.keyboardVerticalOffset || 50 : undefined\n      }\n      behavior={Platform.OS == 'ios' ? 'padding' : undefined}\n      style={props.style}\n    >\n      {props.children}\n      {!props.hideSubmitButton && (\n        <Pressable\n          style={[\n            styles.button,\n            Platform.OS == 'ios' ? { opacity } : undefined,\n            props.buttonStyle,\n          ]}\n          onPress={handleButtonPress}\n          android_ripple={{ color: 'lightgrey', radius: width }}\n          onLayout={(event) => setWidth(event.nativeEvent.layout.width)}\n          onPressIn={() => setOpacity(0.5)}\n          onPressOut={() => setOpacity(1)}\n        >\n          <Text style={[styles.buttonText, props.buttonTextStyle]}>\n            {props.buttonText || 'Submit'}\n          </Text>\n        </Pressable>\n      )}\n    </KeyboardAvoidingView>\n  );\n}\n\nForm.defaultProps = {\n  style: {},\n};\n\nconst styles = StyleSheet.create({\n  button: {\n    height: 48,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.red,\n    borderRadius: 8,\n    marginVertical: 32,\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n"],"mappings":"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"}